!function(t){t(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/the7-woocommerce-product-add-to-cart-v2.default",(function(t,e){e((function(){t.productVariations()}))}))})),t.productVariations=function(e){const i=t(e),a=i.find(".the7-vr-options"),n=i.find("[data-product_variations]"),r=i.find("form"),s=r.find(".single_variation");let o,c;t.data(e,"productVariations",i);const d={init:function(){a.length&&(t("li a",a).on("click",(function(e){e.preventDefault();const i=t(this),a=i.parent(),r=i.closest("ul"),s=t.escapeSelector(r.attr("data-atr")),o=r.siblings("select#"+s),c=(n.data("product_variations"),{[s]:a.hasClass("active")?String(i.data("id")):""}),l={[s]:a.hasClass("active")?"":String(i.data("id"))},g=Object.entries(Object.assign({},c,l)).reduce(((t,[e,i])=>(i&&(t["attribute_"+e]=i),t)),{});if(d.updateProductImage(d.getVariationImage(g)),a.hasClass("active"))a.removeClass("active"),o.val("").trigger("change");else{const t=i.attr("data-id");a.siblings().removeClass("active"),a.addClass("active"),o.val(t).trigger("change")}})),r.find(".variations select").each((function(){const e=t(this),i=e.val();if(i.length){const n=t.escapeSelector(e.attr("id"));a.filter("[data-atr='"+n+"']").find("li a[data-id='"+i+"']").trigger("click")}})));const e=function(){s.children().not(":empty").last().addClass("last")};i.find(".single_variation_wrap").on("show_variation",(function(t,i){e()})),e()},getProductSlider:function(){if("undefined"==typeof sliderObject){const t=i.closest(".product").find(".elementor-widget-the7-woocommerce-product-images-slider");t.length?sliderObject=t.data("the7Slider").getSwiper():sliderObject=null}return sliderObject},replaceImage:function(e,a){c||(c=e.first().clone()),i.addClass("replace-is-loading"),o=t(),e.each((function(){t(this).replaceWith((function(){const t=a.clone();return t.on("load",(function(){i.removeClass("replace-is-loading")})),o=o.add(t),t}))})),i.addClass("has-replaced-img"),i.closest(".product").find(".elementor-widget-the7-woocommerce-product-images-slider").layzrInitialisation()},restoreImage:function(){o&&o.length&&c&&c.length&&(d.replaceImage(o,c),o=void 0,i.removeClass("has-replaced-img"))},updateProductImage:function(e){if(!e||!e.length)return void d.restoreImage();const i=d.getProductSlider();if(i){const a=t(i.wrapperEl).find('img[src="'+e.attr("data-src")+'"]').first();if(a.length)d.restoreImage(),i.slideTo(i.slides.indexOf(a.closest(".the7-swiper-slide")[0]));else{i.slideTo(0);const a=1===i.slides.length?t(i.slides[0]).find("img"):t(i.$wrapperEl).find('.the7-swiper-slide[data-swiper-slide-index="0"]').find("img");d.replaceImage(a,e)}}},getVariationImage:function(e){const i=d.findFirstMatchingVariationOfGivenState(e);if(!i)return;const a=i.image;return t(`\n                        <img\n                            class="replaced-img preload-me aspect lazy lazy-load"\n                            style="--ratio: ${a.src_w} / ${a.src_h};"\n                            width="${a.src_w}"\n                            height="${a.src_h}"\n                            data-src="${a.src}"\n                            data-srcset="${a.srcset||""}"\n                            alt="${a.alt||""}"\n                            title="${a.title||""}"\n                            data-caption="${a.data_caption||""}"\n                            loading="eager"\n                            data-large_image="${a.full_src}"\n                            data-large_image_width="${a.full_src_w}"\n                            data-large_image_height="${a.full_src_h}"\n                            sizes="${a.sizes}"\n                        />\n                    `)},findFirstMatchingVariationOfGivenState(t){if(!t||0===Object.keys(t).length)return;const e=n.data("product_variations");for(let i=0;i<e.length;i++){let a=e[i];if(d.isExactMatch(t,a.attributes))return a}},isExactMatch(t,e){var i=!0;for(var a in t)if(t.hasOwnProperty(a)){var n=t[a],r=e[a];(void 0===n||void 0===r||0===r.length||0!==n.length&&n!==r)&&(i=!1)}return i}};d.init()},t.fn.productVariations=function(){return this.each((function(){void 0!==t(this).data("productVariations")&&t(this).removeData("productVariations"),new t.productVariations(this)}))}}(jQuery);